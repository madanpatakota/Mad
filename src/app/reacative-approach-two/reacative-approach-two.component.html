<div class="container" style="margin-top:10px">
    <div>
        <h4>
            Dynamic User Form
        </h4>
    </div>
    <hr>
    <form [formGroup]="userForm" (ngSubmit)="evtSubmit()">
        <!-- formArray should contains formGroup -->
        <!-- here item refers to the FormGroup -->
        <div>
            <div formArrayName="userDetails">
                <div class="form-group"
                    *ngFor="let item of userForm.get('userDetails')['controls'];let userIndex = index">
                    {{userIndex}}
                    <div formGroupName="{{userIndex}}" class="col-sm-12 row">
                        <div class="col-sm-4">
                            <input
                                [ngClass]="{ShowError:item.controls.userName.invalid && item.controls.userName.touched}"
                                type="text" placeholder="Name" class="form-control" [formControlName]="'userName'" />
                            <small
                             *ngIf="item.controls.userName.invalid && item.controls.userName.touched">
                                Please Enter UserName
                            </small>
                        </div>
                        <div class="col-sm-5">
                            <input [ngClass]="{'ShowError':item.controls.email.invalid && item.controls.email.touched}"
                                type="text" placeholder="Email" class="form-control" [formControlName]="'email'" />
                            <small *ngIf="item.controls.email.invalid && item.controls.email.touched">
                                Please Enter Email
                            </small>
                        </div>
                        <!-- <div class="col-sm-2"> -->
                        <!-- <button type="button" class="close btn btn-primary"><span class="glyphicon glyphicon-trash"></span></button> -->
                        <!-- </div> -->

                        <!-- <button type="button" class="close" aria-label="Close"> -->
                        <!-- <span aria-hidden="true">&times;</span> -->
                        <div class="col-sm-3">
                            <button type="button" class="btn btn-danger" (click)="evtRemove(userIndex)"><i
                                    class="fas fa-trash"></i></button> &nbsp;
                       
                            <button type="button" [disabled]="item.invalid" class="btn btn-success"
                                (click)="evtRowAdd(userIndex)"><i class="fas fa-plus"></i></button>&nbsp;
                        
                            <button type="button" class="btn btn-primary" (click)="evtReset(item)"><i
                                    class="fas fa-refresh"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <hr>
        <input type="button" (click)="evtAdd()" value="Add" class="btn btn-primary"> |
        <button class="btn btn-primary" [disabled]="userForm.invalid"> Submit </button>
    </form>
</div>

